<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Chess.com Risk Score Settings</title>
    <link href="options.css" rel="stylesheet">
</head>
<body>
    <div class="options-container">
        <!-- General Settings -->
        <h2>General Settings</h2>
        <div class="settings-group">
            <div class="setting-item">
                <label class="switch-label">
                    <span>Consider rated games only</span>
                    <div class="switch">
                        <input type="checkbox" id="RATED_ONLY">
                        <span class="slider"></span>
                    </div>
                </label>
                <div class="setting-description">
                    Turn this off if you want unrated games to be considered as well.
                    Note that this might change the scoring results and lower the score significance.
                </div>
            </div>

            <div class="setting-item">
                <label class="switch-label">
                    <span>Auto-open popup when opponent detected</span>
                    <div class="switch">
                        <input type="checkbox" id="AUTO_OPEN_POPUP">
                        <span class="slider"></span>
                    </div>
                </label>
                <div class="setting-description">
                    Note: This feature requires Chrome version 127 or higher.
                    To check your version, visit chrome://version/
                </div>
            </div>
        </div>

        <!-- Risk Score Thresholds -->
        <h2>Risk Score Thresholds</h2>
        <div class="settings-group">
            <div class="setting-description" style="margin-bottom: 16px;">
                Customize when risk levels trigger. Lower values = more sensitive detection.
            </div>

            <!-- Preset Selection -->
            <div class="setting-item">
                <label for="preset-select">Quick Presets</label>
                <select id="preset-select" class="threshold-select">
                    <option value="">Custom Configuration</option>
                    <option value="conservative">Conservative (Higher thresholds)</option>
                    <option value="balanced">Balanced (Default)</option>
                    <option value="aggressive">Aggressive (Lower thresholds)</option>
                    <option value="paranoid">Paranoid (Maximum sensitivity)</option>
                </select>
                <div class="setting-description">
                    Select a preset or customize thresholds manually below.
                </div>
            </div>

            <!-- Risk Level Thresholds -->
            <div class="threshold-group">
                <h3>Risk Level Thresholds</h3>

                <div class="threshold-item">
                    <label for="threshold-medium">Medium Risk Threshold</label>
                    <input type="number" id="threshold-medium" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Score above this triggers yellow/medium risk warning</div>
                </div>

                <div class="threshold-item">
                    <label for="threshold-high">High Risk Threshold</label>
                    <input type="number" id="threshold-high" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Score above this triggers orange/high risk warning</div>
                </div>

                <div class="threshold-item">
                    <label for="threshold-critical">Critical Risk Threshold</label>
                    <input type="number" id="threshold-critical" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Score above this triggers red/critical risk warning</div>
                </div>
            </div>

            <!-- Action Thresholds -->
            <div class="threshold-group">
                <h3>Action Thresholds</h3>

                <div class="threshold-item">
                    <label for="threshold-abort-button">Show Abort Button At</label>
                    <input type="number" id="threshold-abort-button" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Risk score that triggers "Abort Game" / "Skip" buttons</div>
                </div>

                <div class="threshold-item">
                    <label for="threshold-auto-warn">Auto-Warn At</label>
                    <input type="number" id="threshold-auto-warn" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Automatically show warning notification at this score</div>
                </div>

                <div class="threshold-item">
                    <label for="threshold-critical-alert">Critical Alert At</label>
                    <input type="number" id="threshold-critical-alert" min="0" max="100" step="5" class="threshold-input">
                    <span class="threshold-value"></span>
                    <div class="setting-description">Show urgent alert notification at this score</div>
                </div>
            </div>

            <!-- Import/Export Configuration -->
            <div class="threshold-group">
                <h3>Configuration Management</h3>

                <div class="config-buttons">
                    <button id="export-config-btn" class="config-btn">
                        üì• Export Configuration
                    </button>
                    <button id="import-config-btn" class="config-btn">
                        üì§ Import Configuration
                    </button>
                    <input type="file" id="import-config-file" accept=".json" style="display: none;">
                </div>

                <div class="setting-description">
                    Export your custom settings to share or backup. Import configurations from JSON files.
                </div>
            </div>

            <!-- Reset Button -->
            <div class="threshold-group">
                <button id="reset-thresholds-btn" class="reset-btn">
                    üîÑ Reset to Defaults
                </button>
                <div class="setting-description">
                    Restore all thresholds to factory defaults.
                </div>
            </div>
        </div>

        <!-- Global Database Settings -->
        <h2>Global Cheater Database</h2>
        <div class="settings-group">
            <div class="setting-description" style="margin-bottom: 16px;">
                Connect to a crowdsourced database to share and receive intelligence about suspicious players.
            </div>

            <!-- Enable/Disable Global Database -->
            <div class="setting-item">
                <label class="switch-label">
                    <span>Enable Global Database</span>
                    <div class="switch">
                        <input type="checkbox" id="GLOBAL_DB_ENABLED">
                        <span class="slider"></span>
                    </div>
                </label>
                <div class="setting-description">
                    When enabled, the extension will submit anonymous reports and check player reputations from the global database.
                </div>
            </div>

            <!-- Server URL -->
            <div class="setting-item">
                <label for="global-db-url">Server URL</label>
                <input type="text" id="global-db-url" class="text-input" placeholder="http://localhost:8000">
                <div class="setting-description">
                    URL of the global database server. Default: http://localhost:8000
                </div>
            </div>

            <!-- Connection Status -->
            <div class="setting-item">
                <div class="connection-status-container">
                    <div class="connection-status" id="connection-status">
                        <span class="status-indicator" id="status-indicator">‚óè</span>
                        <span class="status-text" id="status-text">Not checked</span>
                    </div>
                    <button id="test-connection-btn" class="config-btn" style="margin-top: 8px;">
                        üîç Test Connection
                    </button>
                </div>
                <div class="setting-description">
                    Check if the server is available and responding.
                </div>
            </div>

            <!-- Server Information -->
            <div class="setting-item" id="server-info-container" style="display: none;">
                <div class="server-info-box">
                    <h4>Server Information</h4>
                    <div class="info-row">
                        <span class="info-label">Status:</span>
                        <span class="info-value" id="server-status-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Version:</span>
                        <span class="info-value" id="server-version-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Total Reports:</span>
                        <span class="info-value" id="server-reports-value">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Uptime:</span>
                        <span class="info-value" id="server-uptime-value">-</span>
                    </div>
                </div>
            </div>

            <!-- Privacy Notice -->
            <div class="privacy-notice">
                <strong>Privacy Notice:</strong> Reports are submitted anonymously. No personal information is collected.
                Only usernames, risk scores, and game formats are shared with the database.
            </div>
        </div>
    </div>
    <div class="buttons-container">
        <button id="save-settings" class="save-button">Save Settings</button>
    </div>
    <script src="options.js" type="module"></script>
</body>
</html> 